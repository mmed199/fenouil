jQuery(document).ready(function(e){function t(t,n){var i=t,a=e("#combinedListOfUsersAndRoles").attr("data").slice(0,-1).split(","),o='<div class="exception-case"><select>';for(key in a){var c=a[key];if(c.indexOf("Role:")>=0){o+=(d=c.substr(6,c.length-6))==i?'<option selected="selected" value="'+d+'">'+c+"</option>":'<option value="'+d+'">'+c+"</option>"}else{var s=c.indexOf("("),r=c.indexOf(")"),d=c.substr(s+1,r-s-1),_=c.substr(0,s);o+=d==i?'<option selected="selected" value="'+d+'">'+_+"</option>":'<option value="'+d+'">'+_+"</option>"}}o+='</select><i class="fa fa-plus add-exception-case" aria-hidden="true"></i><i class="fa fa-minus remove-exception-case" aria-hidden="true"></i></div>',n.find("#outputOfUsersAndRolesSelection").append(o)}function n(e){e.find("#outputOfUsersAndRolesSelection").append('<div class="add-exception-case" id="add-initial-exception"><h3><i class="fa fa-plus" aria-hidden="true"></i> Add an exception case</h3></div>')}e(".hidden").hide(),e(".information-icon").click(function(t){t.preventDefault(),e(this).next(".hidden").slideToggle()}),e(".my-color-field").wpColorPicker(),e(".postbox").on("click",".wp_custom_admin_interface_media_upload_button",function(t){t.preventDefault();var n=e(this).prev(),i=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(e){var t=i.state().get("selection").first().toJSON().url;n.val(t)})}),e(".wp_custom_admin_interface_append_buttons_footer_text").click(function(){e("#wp_custom_admin_interface_custom_footer_ifr").contents().find("#tinymce p").html(e("#wp_custom_admin_interface_custom_footer_ifr").contents().find("#tinymce p").html()+e(this).attr("value")),e("#wp-wp_custom_admin_interface_custom_footer-editor-container").find("textarea").html(e("#wp-wp_custom_admin_interface_custom_footer-editor-container").find("textarea").html()+e(this).attr("value"))}),e(".wp_custom_admin_interface_append_buttons_widget_text").click(function(){e("#wp_custom_admin_interface_custom_widget_content_ifr").contents().find("#tinymce p").html(e("#wp_custom_admin_interface_custom_widget_content_ifr").contents().find("#tinymce p").html()+e(this).attr("value")),e("#wp-wp_custom_admin_interface_custom_widget_content-editor-container").find("textarea").html(e("#wp-wp_custom_admin_interface_custom_widget_content-editor-container").find("textarea").html()+e(this).attr("value"))}),e(".wp_custom_admin_interface_append_buttons_notice_text").click(function(){e("#wp_custom_admin_interface_notice_message_ifr").contents().find("#tinymce p").html(e("#wp_custom_admin_interface_notice_message_ifr").contents().find("#tinymce p").html()+e(this).attr("value")),e("#wp_custom_admin_interface_notice_message-editor-container").find("textarea").html(e("#wp-wp_custom_admin_interface_notice_message-editor-container").find("textarea").html()+e(this).attr("value"))}),e(".userAndRoleSelection").each(function(i){e(this);var a=e(this).next().next(),o=a.find(".saved_exception_cases").val(),c=o.slice(0,-1).split(",");o.length>0?e.each(c,function(e,n){t(n,a)}):n(a)}),e(".wrap").on("click",".add-exception-case",function(n){n.preventDefault();var i=e(this).parent().parent().parent().parent();e(this).parent().parent().find("#add-initial-exception").remove(),t("",i)}),e(".wrap").on("click",".remove-exception-case",function(t){t.preventDefault();var i=e(this).parent().parent(),a=e(this).parent().parent().parent();1==i.find(".exception-case").length?(e(this).parent().remove(),n(a)):e(this).parent().remove()})});